<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestore Articoli - Microblog</title>
    <link rel="stylesheet" href="/styles/main.css">
    <!-- Quill CSS -->
    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css" rel="stylesheet"> -->
    <link href="/assets/quill/1.3.7/quill.snow.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/favicon.png">
</head>

<body>
    <div class="container">
        <header>
            <h1>Gestore Articoli</h1>
            <p class="subtitle">Gestisci le news che compaiono su www.ambvillagdogna.it</p>
        </header>

        <div class="actions">
            <button class="btn btn-success" onclick="openNewArticleModal()">Nuovo Articolo</button>
            <button class="btn" onclick="loadArticles()">Aggiorna Lista</button>
            <button class="btn btn-secondary" onclick="openSettingsModal()">⚙️ Impostazioni</button>
            <a href="https://www.flaticon.com/free-icons/marketing" title="marketing icons">Icone create da Freepik -
                Flaticon</a>
        </div>

        <div id="articlesContainer">
            <div class="loading">Caricamento articoli...</div>
        </div>
    </div>

    <!-- Enhanced Modal per nuovo/modifica articolo -->
    <div id="articleModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Nuovo Articolo</h2>

            <form id="articleForm">
                <div class="form-group">
                    <label for="articleTitle">Titolo</label>
                    <input type="text" id="articleTitle" required>
                    <div class="error" id="titleError"></div>
                </div>

                <div class="form-group">
                    <label for="articleExcerpt">Estratto</label>
                    <textarea id="articleExcerpt" required></textarea>
                    <div class="error" id="excerptError"></div>
                </div>

                <div class="form-group">
                    <label for="articleCategory">Categoria</label>
                    <select id="articleCategory" required>
                        <option value="">Seleziona categoria</option>
                        <option value="eventi">Eventi</option>
                        <option value="news">News</option>
                        <option value="tutorial">Tutorial</option>
                        <option value="recensioni">Recensioni</option>
                    </select>
                    <div class="error" id="categoryError"></div>
                </div>

                <div class="form-group">
                    <label for="articleStatus">Status</label>
                    <select id="articleStatus" required>
                        <option value="draft">Bozza</option>
                        <option value="published">Pubblicato</option>
                        <option value="deleted">Eliminato</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="articleAuthor">Autore</label>
                    <input type="text" id="articleAuthor" value="author" required>
                </div>

                <div class="form-group">
                    <label for="featuredImage">Immagine in Evidenza</label>
                    <select id="featuredImage">
                        <option value="">Nessuna immagine in evidenza</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Elenco Immagini</label>
                    <div id="uploadedImages" class="uploaded-images"></div>
                    <div class="error" id="imagesError"></div>
                </div>

                <div class="form-group editor-group">
                    <label for="editor">Contenuto Articolo</label>
                    <div class="editor-container">
                        <div id="editor"></div>
                    </div>
                    <div class="error" id="contentError"></div>
                </div>

                <div style="text-align: right; margin-top: 30px;">
                    <button type="button" class="btn" onclick="closeModal()">Chiudi</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal per impostazioni -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSettingsModal()">&times;</span>
            <h2>⚙️ Impostazioni Microblog</h2>

            <form id="settingsForm">
                <div class="form-group">
                    <label for="gitUsername">Username Git</label>
                    <input type="text" id="gitUsername" placeholder="Il tuo username Git">
                    <small>Username utilizzato per i commit Git</small>
                    <div class="error" id="gitUsernameError"></div>
                </div>

                <div class="form-group">
                    <label for="authorName">Nome Autore</label>
                    <input type="text" id="authorName" placeholder="Nome visualizzato negli articoli">
                    <small>Nome che apparirà come autore degli articoli</small>
                    <div class="error" id="authorNameError"></div>
                </div>

                <div class="form-group">
                    <label for="ambDataPath">amb-data path</label>
                    <input type="text" id="ambDataPath" placeholder="~/amb-data">
                    <small>Cartella di partenza per amb-data</small>
                    <div class="error" id="ambDataPathError"></div>
                </div>

                <div style="text-align: right; margin-top: 30px;">
                    <button type="button" class="btn" onclick="closeSettingsModal()">Annulla</button>
                    <button type="submit" class="btn btn-success">Salva Impostazioni</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quill JS -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"></script> -->
    <script type="text/javascript" src="/assets/quill/1.3.7/quill.min.js"></script>
    <script type="text/javascript" src="/js/articles.js"></script>
    <script type="text/javascript" src="/js/settings.js"></script>
</body>

</html>